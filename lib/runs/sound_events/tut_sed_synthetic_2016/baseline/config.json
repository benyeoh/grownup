[
    {
        "datasets": {
            "ktf.datasets.process_chain": {
                "input": {
                    "ktf.datasets.join": {
                        "dataset_tuples": [
                            {
                                "ktf.datasets.sound_events.tut_sed_synthetic_2016.from_tfrecord": {
                                    "tut_sed_synthetic_tfrecord_dir": "/hpc-datasets/sound_events/tut_sed_synthetic_2016/tfrecords/train/config1",
                                    "validation_split": 0,
                                    "batch_size": 16,
                                    "shuffle_size": 512
                                }
                            },
                            {
                                "ktf.datasets.sound_events.tut_sed_synthetic_2016.from_tfrecord": {
                                    "tut_sed_synthetic_tfrecord_dir": "/hpc-datasets/sound_events/tut_sed_synthetic_2016/tfrecords/validate/config1",
                                    "validation_split": 0,
                                    "batch_size": 16,
                                    "shuffle_size": 512
                                }
                            }
                        ]
                    }
                }
            }
        },
        "model": {
            "ktf.models.OneHeadNet": {
                "base_model": {
                    "ktf.models.networks.DepthWiseSeparableDNN": {
                        "dropout_rate": [
                            0.3,
                            0.3,
                            0.3
                        ]
                    }
                },
                "num_outputs": 16,
                "final_activation": {
                    "tf.keras.layers.Activation": {
                        "activation": "sigmoid"
                    }
                }
            }
        },
        "loss": {
            "tf.keras.losses.BinaryCrossentropy": {
                "from_logits": false
            }
        },
        "metrics": [
            {
                "ktf.models.metrics.F1Score": {
                    "thresholds": 0.5,
                    "name": "f1_score"
                }
            }
        ],
        "optimizer": {
            "tf.keras.optimizers.Adam": {
                "learning_rate": 0.001
            }
        },
        "train_loop": {
            "ktf.train.KerasTrainLoop": {
                "num_epochs": 100,
                "save_dir": "/hpc-datasets/junwah/ktf/runs/dnd_baseline_latest/",
                "callbacks": [
                    {
                        "tf.keras.callbacks.ModelCheckpoint": {
                            "filepath": "/hpc-datasets/junwah/ktf/runs/dnd_baseline_latest/ckpt/best_val.tf",
                            "monitor": "val_f1_score",
                            "save_best_only": true,
                            "save_weights_only": true,
                            "mode": "max",
                            "verbose": 1
                        }
                    },
                    {
                        "tf.keras.callbacks.CSVLogger": {
                            "filename": "/hpc-datasets/junwah/ktf/runs/dnd_baseline_latest/training.log"
                        }
                    }
                ]
            }
        }
    }
]
